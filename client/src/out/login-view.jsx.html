<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: login-view.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: login-view.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react';
import Form from 'react-bootstrap/Form';
import Button from 'react-bootstrap/Button';
import Col from 'react-bootstrap/Col'
import Animated from 'react-css-animated';

import axios from 'axios';


/**
 *  @module LoginView
 *  @description The View rendered for login.
 * */
export function LoginView (props) {
    const [ username, setUsername ] = useState('');
    const [ password, setPassword ] = useState('');
    const [ validated, setValidated] = useState(false);
    const [ loginFail, setloginFail] = useState(false);
    var mounted = true

    /**
     *  @function handleSubmit
     *  @description Handles submit to post user info to server and return authdata.
     *  @param {event} event target
     *  the target of the click event. (usually a button)
     * */

    const handleSubmit = (event) => {
        const form = event.currentTarget;
        if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
        }
        setValidated(true);

        if (form.checkValidity() === true) {
            if (mounted) {
            event.preventDefault();
            axios.post('https://opgamesapi.herokuapp.com/login', {
                Username: username,
                Password: password
            })
            .then(response => {
                const data = response.data;
                props.onLoggedIn(data);
            })
            .catch(e => {
                setValidated(false);
                setloginFail(true);

            });
            }
        }

    };

    useEffect(() => {
        return () => {
            mounted = false
        }
    },[mounted])

    return (

        &lt;Animated className='h-100' animateOnMount animationIn="fadeInLeft" duration={{in:600}} animationOut="fadeOutRight" isVisible={props.animate}>
            &lt;Col className='mt-5'>
                &lt;h1 className='text-center pt-3'>Login&lt;/h1>
                &lt;Form className='col mx-auto ' noValidate validated={validated} onSubmit={handleSubmit}>
                    &lt;Form.Group controlId="validationCustom01">
                    &lt;Form.Label>Username&lt;/Form.Label>
                    &lt;Form.Control
                        required
                        isInvalid={loginFail}
                        type="text"
                        placeholder=""
                        value={username}
                        onChange={e => setUsername(e.target.value)}
                    />

                    &lt;Form.Control.Feedback type="invalid">
                    {loginFail ? 'Username/Password not found!' : 'Please Enter a valid Username'}
                    &lt;/Form.Control.Feedback>
                    &lt;/Form.Group>
                    &lt;Form.Group controlId="validationCustom02">
                    &lt;Form.Label>Password&lt;/Form.Label>
                    &lt;Form.Control
                        required
                        isInvalid={loginFail}
                        type="password"
                        placeholder=""
                        value={password}
                        onChange={e => setPassword(e.target.value)}
                    />
                    &lt;Form.Control.Feedback type="invalid">
                    {loginFail ? 'Username/Password not found!' : 'Please enter a valid Password'}
                    &lt;/Form.Control.Feedback>
                    &lt;Button variant='link' onClick={() => props.linkTo("/register", 700, false)}>Dont have an account? Click here to register!&lt;/Button>
                    &lt;/Form.Group>


                    &lt;Button type="submit" className='d-block mx-auto'>Submit&lt;/Button>
                &lt;/Form>
            &lt;/Col>
        &lt;/Animated>
    );

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-LoginView.html">LoginView</a></li><li><a href="module-MainViewer.html">MainViewer</a></li><li><a href="module-NavMenu.html">NavMenu</a></li><li><a href="module-RegisterView.html">RegisterView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 11 2020 15:51:23 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
